{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}

{# div below is the hook for htmx swap #}
<div id="collection-detail">
	
<div class="container mt-5 mb-5">
	
	<div class="row">
		<div class="col-md-6 col-9 mx-auto g-0 pb-2">
			<p class="float-end">
				
			
<a class="text-decoration-none" href="{% url 'log_collections' %}">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-card-list" viewBox="0 0 16 16">
  <title>Collections</title>
  <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
  <path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
</svg>
</a>
&nbsp;

			<a class="text-decoration-none" href="{% url 'log_collection_update' slug=collection.slug pk=collection.pk %}">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
	  <title>Update collection</title>
  <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
</svg></a>
				&nbsp;
				<a class="text-decoration-none" href="{% url 'logout' %}">
					  <title>User settings</title>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-person-lines-fill" viewBox="0 0 16 16">
  <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"/>
</svg></a></p>
		</div>
	</div>
	
	<div class="row">
		<div class="col-md-6 col-9 mx-auto bg-white shadow-lg rounded">
					
					<p class="mt-3 text-center">
					{{ collection.name }}
					</p>
				

				    

			
				{% if items %}
					<div class="" id="">
						
						<textarea id="eventComment" name="comment" class="form-control" placeholder="Comment ..."></textarea>
					</div>
					{% for item in items %}
							<div class="my-3" id="">
								<div class="card">
								  <div class="card-body">
									<div class="container g-0">
										<div class="row">
											<div class="col-8">
												<h5 class="card-title py-0 my-0">{{ item.name }}</h5>
								    			<p class="card-text py-0 my-0 text-secondary">
													<small>{{ item.description }}</small>
												</p>
												
												<p>
													<a class="" title="Show item options" data-bs-toggle="collapse" href="#itemShowMore-{{item.id}}" role="button" aria-expanded="false" aria-controls="itemShowMore-{{item.id}}">
														
														
														<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
														  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
														</svg>
													</a>
												</p>
												
												<div class="collapse py-0 my-0" id="itemShowMore-{{item.id}}">
														<a href="{% url 'log_collection_item_update' pk=item.id %}" class="btn btn-outline-primary btn-sm">
															<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
															<title>Update item</title>
															  <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
															</svg>
														</a>
														
	

												</div>
												
											</div>
											<div class="col-4">
													<button class="btn btn-success float-end" hx-post="{% url 'log_collection_item_event_create' pk=item.id %}" hx-include="[name='comment']" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
													
													<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16">
													  <path d="M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z"/>
													</svg>
												</button>
											</div>
								  </div>
								</div>
							</div>
						</div>
					</div>
					
					{% endfor %}
				{% else %}
				<div class="mt-3">
					<div class="d-grid gap-2 my-3">
						<a href="{% url 'log_collection_item_create' pk=collection.id %}" class="btn btn-outline-primary btn-sm">
							Add Item
						</a>
					</div>
				</div>
				{% endif %}
			

			{% if events %}
				<hr>
				<p>Events</p>
				<p>
					Paginate them form the start and have pagination work with htmx.
					That way no need to have another page.
					Then add option to delete event. Dont provide option to update
					<!-- Example: https://github.com/adamchainz/django-htmx/blob/main/example/example/core/views.py -->
				</p>
				
				
				
				<ul class="list-group list-group-flush my-2 my-md-4">
					{% for event in events %}
				  <li class="list-group-item"><span class="badge rounded-pill bg-primary text-white">*</span> 
					  
					  <a href="">
					   {{ event }}
				  	  </a>
				  
				  </li>
				  {% endfor %}
				</ul>
		 	 {% endif %}

		</div>
			
		</div>
	</div>
	

</div>
</div>
{% endblock %}